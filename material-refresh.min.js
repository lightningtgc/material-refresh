(function(){"use strict";!function(){function e(e){var t=e.match("(d+)px");return null==t?0:parseInt(t[1],10)}function t(t){if(t=t||{},w=t.scrollEl?t.scrollEl:G?w:document,C=t.onBegin,X=t.onEnd,Y=t.maxTime||Y,M=t.nav||M,0===document.querySelectorAll("#muirefresh").length&&n(),p=document.querySelector("#muiRefresh"),y=p.querySelector(".mui-spinner-wrapper"),f=p.querySelector(".mui-arrow-wrapper"),v=p.querySelector(".mui-arrow-main"),!a()){p.classList.add("mui-refresh-nav"),B=e(M.style.height)+20;var i;if(i=M.getBoundingClientRect()){{var o=i.top+document.body.scrollTop;i.left+document.body.scrollLeft}I=o,"fixed"!==M.style.position&&(B+=I),p.style.top=I+"px"}var s=M.style.zIndex;p.style.zIndex=s-1}t.index&&(p.style.zIndex=~~t.index),t.top&&(p.style.top=t.top),p.classList.add(t.theme?t.theme:T),p.classList.add(x),t.freeze||d()}function n(){document.body.insertAdjacentHTML("beforeend",J)}function i(e){K.top=G&&w==document.body?window.scrollY:w!=document?document.querySelector(w).scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop,K.top>0||b||(h=B+q,p.style.display="",e.touches[0]&&(K.x1=e.touches[0].pageX,D=K.y1=e.touches[0].pageY))}function o(e){var t,n,i=(new Date).getTime();if(!(K.top>0||b)&&e.touches&&1===e.touches.length){if(t=e.touches[0],K.x2=t.pageX,K.y2=t.pageY,n=K.y2-K.y1,K.y2-D+R>0){if(e.preventDefault(),90>i-F)return;if(!(B-I+k>h))return void u();h+=n,r(h)}K.y1=t.pageY,F=i}}function s(e){K.top>0||b||(e.preventDefault(),h>B-I+z?u():l())}function l(){var e=B+q;a()?(p.style.top=e+"px",p.style.webkitTransform="scale(0)"):p.style.top=I+"px",setTimeout(function(){b||(p.style.opacity=0,p.style.display="none")},300)}function r(e){var t=40,n=e/t>1?1:0>e/t?0:e/t,i=B+q+e;a()&&(p.style.webkitTransform="scale("+n+")"),p.style.opacity=n,p.style.top=i+"px",v.style.webkitTransform="rotate("+-(3*e)+"deg)"}function u(){if(b=!0,E&&"function"==typeof N?N():"function"==typeof C&&C(),p.style.opacity=1,E)p.classList.add(x),p.style.webkitTransform="scale(1)";else{var e=B+S-20;a()||(e+=A),p.style.top=e+"px"}f.style.display="none",y.style.display="",H=setTimeout(c,Y)}function c(){L=!0,p.classList.add(g),y.style.display="none",setTimeout(function(){p.classList.remove(g),p.style.display="none",l(),f.style.display="",b=!1,L=!1,E&&"function"==typeof j?j():"function"==typeof X&&X(),E=!1},500)}function a(){return!M.length||0===document.querySelectorAll(M).length}function d(){w.addEventListener("touchstart",i),w.addEventListener("touchmove",o),w.addEventListener("touchend",s)}function m(){w.removeEventListener("touchstart",i),w.removeEventListener("touchmove",o),w.removeEventListener("touchend",s)}var p,y,f,v,h,w=document.body,g="mui-refresh-noshow",x="mui-refresh-main-animat",T="mui-blue-theme",b=!1,L=!1,E=!1,q=-85,S=0,k=65,z=-25,A=20,D=0,I=0,R=2,Y=6e3,B=60,C=null,N=null,X=null,j=null,H=null,M="",F=(new Date).getTime(),G=/ip(hone|ad|od)/i.test(navigator.userAgent),J='<div id="muiRefresh" class="mui-refresh-main">            <div class="mui-refresh-wrapper ">                <div class="mui-arrow-wrapper">                    <div class="mui-arrow-main"></div>                </div>                <div class="mui-spinner-wrapper" style="display:none;">                    <div class="mui-spinner-main" >                        <div class="mui-spinner-left">                            <div class="mui-half-circle"></div>                        </div>                        <div class="mui-spinner-right">                            <div class="mui-half-circle"></div>                        </div>                    </div>                </div>            </div>        </div>',K={top:0,x1:0,x2:0,y1:0,y2:0};t.resolve=function(){!L&&H&&(clearTimeout(H),H=null,c())},t.destroy=function(){m(),p.parentNode.removeChild(p)},t.refresh=function(e){if(!b){var t=B+S-20;b=!0,E=!0,e=e||{},N=e.onBegin,j=e.onEnd,a()||(t+=A),p.style.display="",p.classList.remove(x),p.style.top=t+"px",p.style.webkitTransform="scale(0.01)",setTimeout(u,60)}},t.unbindEvents=function(){m()},t.bindEvents=function(){d()},window.mRefresh=t}()}).call(this);